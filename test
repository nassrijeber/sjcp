Path downloadZipToLocal(AmazonS3 s3, String bucket, String key) throws IOException {
    Path localZip = Files.createTempFile("input_", ".zip");

    try (S3Object s3Obj = s3.getObject(bucket, key);
         InputStream in = s3Obj.getObjectContent();
         OutputStream out = Files.newOutputStream(localZip,
                 StandardOpenOption.CREATE,
                 StandardOpenOption.TRUNCATE_EXISTING)) {

        byte[] buf = new byte[64 * 1024];
        int n;
        while ((n = in.read(buf)) != -1) {
            out.write(buf, 0, n);
        }
    }

    return localZip;
}